if (!sessionStorage.getItem("questions")) {
    const questions = [
        { 
            id: 1, 
            text: "What is the capital of France?", 
            options: ["Berlin", "Madrid", "Paris", "Rome"], 
            correct: "Paris", 
            userAnswer: "Rome"  
        },
        { 
            id: 2, 
            text: "Which planet is known as the Red Planet?", 
            options: ["Venus", "Mars", "Jupiter", "Saturn"], 
            correct: "Mars",
            userAnswer: "Mars"
        },
        { 
            id: 3, 
            text: "Who invented the telephone?", 
            options: ["Nikola Tesla", "Thomas Edison", "Alexander Graham Bell", "Michael Faraday"], 
            correct: "Alexander Graham Bell",
            userAnswer: "Alexander Graham Bell"
        },
        { 
            id: 4, 
            text: "What is the largest ocean on Earth?", 
            options: ["Atlantic Ocean", "Indian Ocean", "Arctic Ocean", "Pacific Ocean"], 
            correct: "Pacific Ocean",
            userAnswer: "Pacific Ocean"
        }
    ];
    sessionStorage.setItem("questions", JSON.stringify(questions));
}

document.addEventListener("DOMContentLoaded", () => {
    updateQuestionBoxes();
    showQuestion(1);
});

function showQuestion(questionId) {
    const questions = JSON.parse(sessionStorage.getItem("questions"));
    const question = questions.find(q => q.id === questionId);

    if (question) {
        document.querySelector(".question-number").innerText = `Question ${questionId}:`;
        document.querySelector(".question-text").innerText = question.text;

        let answersContainer = document.querySelector(".answers-container");
        answersContainer.innerHTML = "";

        question.options.forEach((option, index) => {
            let answerDiv = document.createElement("div");
            answerDiv.className = "answer-option";

            if (option === question.correct) {
                answerDiv.classList.add("correct-answer");
            }
            if (option === question.userAnswer && option !== question.correct) {
                answerDiv.classList.add("user-answer");
            }

            let answerCircle = document.createElement("span");
            answerCircle.className = "answer-circle";
            answerCircle.innerText = String.fromCharCode(65 + index); 

            let answerText = document.createElement("span");
            answerText.className = "answer-text";
            answerText.innerText = option;

            answerDiv.appendChild(answerCircle);
            answerDiv.appendChild(answerText);
            answersContainer.appendChild(answerDiv);
        });

        document.querySelectorAll(".question-box").forEach(box => {
            box.classList.remove("active");
        });

        let activeBox = document.querySelector(`.question-box:nth-child(${questionId})`);
        activeBox.classList.add("active");
        activeBox.style.fontSize = "18px";
        activeBox.style.border = "3px solid white";
    }
}

function updateQuestionBoxes() {
    const questions = JSON.parse(sessionStorage.getItem("questions"));

    questions.forEach(question => {
        const box = document.querySelector(`.question-box:nth-child(${question.id})`);
        if (box) {
            if (question.userAnswer === question.correct) {
                box.classList.add("correct");
            } else {
                box.classList.add("wrong");
                box.style.backgroundColor = "red";
            }
        }
    });
}
document.querySelectorAll(".question-box").forEach(box => {
    box.classList.remove("active");
});

let activeBox = document.querySelector(`.question-box:nth-child(${questionId})`);
activeBox.classList.add("active");
